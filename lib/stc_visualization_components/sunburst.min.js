!function(a){var b={margin:{top:2,right:2,bottom:2,left:2},innerRadius:60,padding:8e-4,aspectRatio:16/9,width:600};this.sunburstChart=function(c,d,e){var f,g,h=a(!0,{},b,d),i=h.width,j=Math.ceil(i/h.aspectRatio),k=h.innerHeight=j-h.margin.top-h.margin.bottom,l=h.innerWidth=i-h.margin.left-h.margin.right,m=c.select("g.margin-offset"),n=m.select(".data"),o=function(a){return(a||d3.transition()).duration(1e3)},p=function(){var a,b,d,g=this.settings,h=g.filterData&&"function"==typeof g.filterData?g.filterData.call(g,e):e,i=Math.min(k,l)/2,j=g.innerRadius/2,p=f.x=d3.scaleLinear().range([0,2*Math.PI]),q=f.y=d3.scaleLinear().range([j,i]),r=function(a){return null===a.parent?-Math.PI/2:Math.max(0,Math.min(2*Math.PI,p(a.x0)))-Math.PI/2},s=function(a){return null===a.parent?2*Math.PI:Math.max(0,Math.min(2*Math.PI,p(a.x1)))-Math.PI/2},t=function(a){return q(a.y0)},u=function(a){return q(a.y1)},v=d3.arc().startAngle(r).endAngle(s).innerRadius(t).outerRadius(u).padAngle(0!==g.padding?function(a){var b=p.domain(),c=b[1]-b[0]/1;return("function"==typeof g.padding?g.padding.call(g,a):g.padding)*c}:null),w=g.getChildren?g.getChildren.bind(g):null,x=g.getValue?g.getValue.bind(g):null,y=g.getId?g.getId.bind(g):null,z=g.getText?g.getText.bind(g):null,A=g.zoomCallback?g.zoomCallback.bind(g):null,B=function(){d3.select(this).select("textPath").text(H)},C=function(a,b){var c="arc arc"+(b+1);return g.getClass&&"function"==typeof g.getClass&&(c+=" "+g.getClass.call(g,a)),c},D=function(a){var b=n.node(),c=p.domain().slice(),d=[a.x0,a.x1].slice(),e=d3.interpolateArray(c,d);return b._domain=d,function(){return function(a){p.domain(e(a))}}},E=function(a){return function(){return v(a)}},F=function(a){var b,c=this.parentNode._current,d={x0:a.x0,x1:a.x1,y0:a.y0,y1:a.y1};return b=d3.interpolate(c,d),this.parentNode._current=d,function(c){var d=b(c);return d.parent=a.parent,v(d)}},G=f.zoom=function(a){var b,c=d3.select("#"+a).data()[0],d=n.selectAll("textPath");n.transition(o()).tween("scale",D(c)),d.text(null),b=n.selectAll(".arc").transition(o()).on("end",B),b.select("path").attrTween("d",E),A&&A(a)},H=function(a,b,c){var d=c[0],e=d3.select(d.parentNode).append("tspan"),f=z.apply(this,arguments),g=function(){var b,c,d,g,h,i,j;if(b=(s(a)-r(a))/(2*Math.PI),c=q(2*(a.y1-a.y0)/3+a.y0),d=2*b*Math.PI*c-10,f.length<1||d<=0)return null;if(e.text("..."),g=e.node().getComputedTextLength(),e.text(f),(h=e.node().getComputedTextLength())<d)return f;if(3*g>d)return null;for(j=h/d,i=Math.ceil(1*f.length/j);e.node().getSubStringLength(0,i)+g>d;)i--;return f.substr(0,i)+"..."}();return e.remove(),g},I=d3.partition(),J=I((h instanceof d3.hierarchy?h:d3.hierarchy(h,w)).sum(x));n.empty()?n=m.append("g").attr("class","data").attr("transform","translate("+l/2+","+k/2+")"):(b=n.node()._domain)&&p.domain(b),d=function(){var a,b,c;if(g.zoom)for(a=J.descendants(),b=0;b<a.length;b++)if(c=a[b],y(c)===g.zoom)return c}(),a=n.selectAll(".arc").data(J.descendants(),y),a.enter().call(function(){a.empty()&&d&&(p.domain([d.x0,d.x1]),n.node()._domain=p.domain())}).append("g").attr("id",y).attr("class",C).each(function(a,b){var d=d3.select(this),e=function(){return c.attr("id")+"arc"+b};this._current=a,d.append("path").attr("id",e).attr("d",v).on("click",function(){G(this.parentNode.id)}),d.append("text").attr("dy",15).attr("dx",5).attr("aria-hidden","true").append("textPath").attr("xlink:href",function(){return"#"+e.apply(this,arguments)}).text(H)}),a.attr("class",C).transition().call(function(){a.empty()||n.transition(o()).tween("scale",D(d))}).each(function(){var a=o(d3.select(this).transition());a.select("text textPath").text(null),a.select("path").attrTween("d",F),a.on("end",B)})};return f={settings:h,svg:c},c.attr("viewBox","0 0 "+i+" "+j).attr("preserveAspectRatio","xMidYMid meet").attr("role","img").attr("aria-label",h.altText),m.empty()&&(m=c.append("g").attr("class","margin-offset").attr("transform","translate("+h.margin.left+","+h.margin.top+")")),g=function(){p.apply(f),d3.stcExt.addIEShim(c,j,i),h.datatable},void 0===e?d3.json(h.url,function(a,b){e=b,g()}):g(),f}}(jQuery.extend,jQuery);
//# sourceMappingURL=sunburst.min.js.map