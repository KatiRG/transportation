!function(a){var b={margin:{top:0,right:0,bottom:0,left:0},aspectRatio:16/9,padding:1.5,width:600};this.bubbleChart=function(c,d,e){var f,g,h=a(!0,{},b,d),i=h.width,j=Math.ceil(i/h.aspectRatio),k=h.innerHeight=j-h.margin.top-h.margin.bottom,l=h.innerWidth=i-h.margin.left-h.margin.right,m=d3.pack().size([l,k]),n=c.select("g.margin-offset"),o=n.select(".data"),p=d3.transition().duration(1e3),q=function(){return o.empty()&&(o=n.append("g").attr("class","data").attr("aria-hidden","true")),o.selectAll(".bubble").order()},r=function(){var a,b,c=this.settings,d=c.filterData&&"function"==typeof c.filterData?c.filterData.call(c,e):e,f=d3.hierarchy({children:d}).sum(c.y.getValue.bind(c)).sort(function(a,b){return c.y.getValue.call(c,b)-c.y.getValue.call(c,a)}),g=function(a){if(c.z&&c.z[a]&&"function"==typeof c.z[a])return c.z[a].bind(c)},i=function(a,b){var d="bubble bubble"+(b+1);return c.z&&c.z.getClass&&"function"==typeof c.z.getClass&&(d+=" "+c.z.getClass.call(c,a)),d},j=function(){var a,b,c,d,e=g("getBubbleStyle");if(e&&(a=e.apply(null,arguments))&&"object"==typeof a)for(b=Object.keys(a),c=0;c<b.length;c++)d=b[c],d3.select(this).style(d,a[d])},k=function(a,b,c){return isNaN(a.x)||isNaN(a.y)?d3.select(c[b]).attr("transform"):"translate("+a.x+","+a.y+")"},l=function(a){return a.r||0};m.padding(h.padding),m(f),a=q().data(f.children,c.z.getId),b=a.enter().append("g").attr("id",g("getId")).attr("class",i).attr("transform",k),b.append("circle").attr("r",l).each(j),b.append("text").text(c.x.getText.bind(c)),b=a.transition(p).attr("class",i).attr("transform",k),b.select("circle").attr("r",l).each(j),b.select("text").text(c.x.getText.bind(c)),b=a.exit().transition(p),b.select("circle").attr("r",0),b.select("text").text("")},s=function(){},t=function(){o.remove()};return f={settings:h,clear:t,svg:c},c.attr("viewBox","0 0 "+i+" "+j).attr("preserveAspectRatio","xMidYMid meet").attr("role","img").attr("aria-label",h.altText),n.empty()&&(n=c.append("g").attr("class","margin-offset").attr("transform","translate("+h.margin.left+","+h.margin.top+")")),g=function(){r.apply(f),d3.stcExt.addIEShim(c,j,i),!1!==h.datatable&&s.apply(f)},void 0===e?d3.json(h.url,function(a,b){e=b,g()}):g(),f}}(jQuery.extend);
//# sourceMappingURL=bubble.min.js.map